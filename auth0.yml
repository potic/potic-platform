clients:
  - 0:
    name: 'potic.me'
    type: 'Single Page Application'
    allowedCallbacks: 'http://localhost:8000/callback, http://185.14.185.186/callback, http://46.101.62.243/callback'
    connections:
      social:
        - 'google-oauth2'
  - 1:
    name: 'potic-api'
    type: 'Non Interactive Client'
    connections:
      social:
        - 'google-oauth2'    
apis:
  name: 'potic-api'
  identifier: 'potic-api'
  scopes:
    - 0:
      name: 'get:articles'
      description: 'get user personal articles'
    - 1:
      name: 'update:articles'
      description: 'update user personal articles'
connections:
  - google
users:
  - 0:
    name: 'Yaroslav Yermilov'
    user_metadata: '{ "pocketSquareId": "58b1800bc9e77c0001d1d701" }'
  - 1:
    name: 'Vlad Grytsun'
    user_metadata: '{ "pocketSquareId": "58b1800dc9e77c0001d1d702" }'
rules:
  - 0:
    description: 'Add pocketSquareId attribute to the user'
    code: '
            function (user, context, callback) {
              user.user_metadata = user.user_metadata || {};
              // user.user_metadata.pocketSquareId = user.user_metadata.pocketSquareId || 'blue';
              context.idToken['https://potic.me/pocketSquareId'] = user.user_metadata.pocketSquareId;

              auth0.users.updateUserMetadata(user.user_id, user.user_metadata)
                .then(function(){
                    callback(null, user, context);
                })
                .catch(function(err){
                    callback(err);
                });
            }
    '

